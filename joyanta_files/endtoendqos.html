<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><style id="stndz-style"></style> 
  <link type="text/css" rel="stylesheet" href="./style.css">
<title>End To End QoS</title> 
</head> 
<body>
  <h2>Provisioning quality of service (qos) in distributed storage</h2> 

<table width="900"> 
<tbody><tr> 

<td width="600"> 
<p>
Quality of service or qos management plays a vital role to provide differentiated services to different users (clients/applications). 
The service provider makes service level agreement (SLA) with the clients to guarantee the qos. 
For example: the client makes a SLA with the service provider that, the response time will never exceeds 10 millisecond, for 99.99% of the packets. 
In terms of network and storage, the QoS parameters could be delay, jitter, packet loss etc. and bandwidth, iops, etc. respectively.

The networks qos is well defined in many protocol implementations (e.g. COS in 802.1Q and DSCP in layer 3 network), it has several limitations in the data center context. First, DSCP was developed for WAN and is based on packet loss characteristics. In data centers, packet loss is highly undesirable as it can cause the applications to hang or severly degrade their performance.  Second, DSCP provides a hop-by-hop control wherein each switch along the path marks the packets according to the supplied policies. Instead, what is needed is an end-to-end mechanism that can be managed from the service endpoints. Third, the data center is not limited to layer-2 switches, and routinely uses switches with layer-3 (or routing) capabilities. Thus, an Ethernet level QoS is itself insufficient. 
Providing end to end qos in a distributed storage system is difficult for a couple of reasons: 
<ul>
  <li>
    The semantic gap between the file level (host side) and the block level information (storage side), there is little/no relation between the semantics.
For example: it is not possible to find an association between the blocks to file or block to applications. So without additional management, storage servers/block devices can not guarantee the qos defined by the application.
  </li>
  <li>
    Network plays a vital role to ensure the end to end qos, for example, a network switch queued up all the requests and follow FIFO! That could be devastating for a delay sensitive applications.
  </li>
  <li>
    One may argue different Data center bridging (DCB) solution can be useful in order to provide differtiated service to different applications. But the problems are multifold. 1) Tagging the IO request with the network semantics, 2) Manual configuration of the network resources, 3) Consistent monitoring of the performance and network resources in order to set the paramters correctly, etc.
  </li>	  
</ul>
	
  In this work, we try to address the three issues mentioned above. This work mainly focuses on both the NVME over Fabrics (NVME over TCP more specifically)
and Persistent memory over Fabrics (pm-of) protocol, and different QoS requirement by different applications, running over those 
protocols. For the driver enhancement, we are working on <a href="https://spdk.io/">SPDK</a> and <a href = "https://pmem.io/pmdk/">PMDK</a>. For 
<br/><br/>
I am always open for discussion and suggestions. Please feel free to contact me (preferably email) for any information or suggestions or discussion regarding this work.
</p>
</td>
 
<td> 
	
</td> 

</tr> 
</tbody></table> 
</body>
</html>
